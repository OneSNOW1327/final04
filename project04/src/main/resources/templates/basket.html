<h1>장바구니</h1>
<thead>
<tr>
	<th>선택</th>
	<th>상품사진</th>
	<th>상품명</th>
	<th>판매가</th>
	<th>수량</th>
</tr>
</thead>

<tbody>
<tr th:each=" basket : ${user.basketList}">
		<td><input type="checkbox" class="basket-check" name="check" th:value="${basket.id}"/></td>
		<td><img src="|/file/display?filename=${basket.product.thumbnail[0]}|" style="max-width: 50px;">상품사진</td>
		<td th:text="${basket.product.name}">상품명</td>
		<td th:text="${product.sellPrice*(1-product.discount)}">할인가</td>
		<td th:text="${basket.quantity}">수량</td>
</tr>
</tbody>

<form id="basketForm" action="/??" method="post"> 
	<input type="hidden" id="selectProduct" name="selectProduct"> <!-- 숨겨진 필드, 선택된 장바구니 항목 저장 -->
	<button type="submit">결제하기</button> 
</form>

<script>
document.getElementById('basketForm').addEventListener('submit', function(event) {
	event.preventDefault(); // 기본 폼 제출 동작을 막습니다.
	const checkboxes = document.querySelectorAll('.basket-check:checked'); // 선택된 체크박스들을 모두 선택합니다.
	const selectedValues = Array.from(checkboxes).map(cb => cb.value); // 각 체크박스의 값을 추출하여 배열로 만듭니다.
	document.getElementById('selectProduct').value = selectedValues.join(','); // 배열을 콤마로 구분된 문자열로 변환하여 히든 필드에 설정합니다.
	// 폼을 제출합니다.
	this.submit(); // 폼을 다시 제출합니다.
});
</script>